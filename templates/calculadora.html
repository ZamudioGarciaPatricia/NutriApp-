{% extends 'base.html' %}

{% block title %}info {% endblock %}

{% block head_extra %}
    {% endblock %}

{% block content %}

<body class="bg-dark text-light">
<div class="container py-4">

    <h1 class="text-center text-success mb-4">Calculadoras Nutricionales</h1>

    <div class="row g-4">

        <div class="col-md-6">
            <form method="POST" class="p-3 border rounded bg-secondary">
                <h4 class="text-success">IMC</h4>
                <input type="hidden" name="calc" value="imc">

                <label>Peso (kg)</label>
                <input name="peso" class="form-control mb-2" type="number" step="0.01" required>

                <label>Altura (m)</label>
                <input name="altura" class="form-control mb-3" type="number" step="0.01" required>

                <button class="btn btn-success w-100 rounded">Calcular</button>
            </form>

            {% if resultados.imc %}
            <div class="card border-success bg-success bg-opacity-25 mt-3">
                <div class="card-body">
                    <h5 class="text-success">IMC:</h5>
                    <p class="fs-4">{{ resultados.imc }}</p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <form method="POST" class="p-3 border rounded bg-secondary">
                <h4 class="text-success">TMB</h4>
                <input type="hidden" name="calc" value="tmb">

                <label>Peso (kg)</label>
                <input name="peso" class="form-control mb-2" type="number" required>

                <label>Altura (cm)</label>
                <input name="altura" class="form-control mb-2" type="number" required>

                <label>Edad</label>
                <input name="edad" class="form-control mb-2" type="number" required>

                <label>Sexo</label>
                <select name="sexo" class="form-control mb-3" required>
                    <option value="hombre">Hombre</option>
                    <option value="mujer">Mujer</option>
                </select>

                <button class="btn btn-success w-100 rounded">Calcular</button>
            </form>

            {% if resultados.tmb %}
            <div class="card border-success bg-success bg-opacity-25 mt-3">
                <div class="card-body">
                    <h5 class="text-success">TMB:</h5>
                    <p class="fs-4">{{ resultados.tmb }} kcal</p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <form method="POST" class="p-3 border rounded bg-secondary">
                <h4 class="text-success">GCT</h4>
                <input type="hidden" name="calc" value="gct">

                <label>TMB</label>
                <input name="tmb" class="form-control mb-2" type="number" required>

                <label>Factor de actividad</label>
                <select name="factor" class="form-control mb-3" required>
                    <option value="1.2">Sedentario</option>
                    <option value="1.375">Ligero</option>
                    <option value="1.55">Moderado</option>
                    <option value="1.725">Intenso</option>
                </select>

                <button class="btn btn-success w-100 rounded">Calcular</button>
            </form>

            {% if resultados.gct %}
            <div class="card border-success bg-success bg-opacity-25 mt-3">
                <div class="card-body">
                    <h5 class="text-success">GCT:</h5>
                    <p class="fs-4">{{ resultados.gct }} kcal</p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <form method="POST" class="p-3 border rounded bg-secondary">
                <h4 class="text-success">Peso Ideal</h4>
                <input type="hidden" name="calc" value="ideal">

                <label>Altura (cm)</label>
                <input name="altura" class="form-control mb-2" type="number" required>

                <label>Sexo</label>
                <select name="sexo" class="form-control mb-3" required>
                    <option value="hombre">Hombre</option>
                    <option value="mujer">Mujer</option>
                </select>

                <button class="btn btn-success w-100 rounded">Calcular</button>
            </form>

            {% if resultados.ideal %}
            <div class="card border-success bg-success bg-opacity-25 mt-3">
                <div class="card-body">
                    <h5 class="text-success">Peso Ideal:</h5>
                    <p class="fs-4">{{ resultados.ideal }} kg</p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="col-12">
            <form method="POST" class="p-3 border rounded bg-secondary">
                <h4 class="text-success">Macronutrientes</h4>
                <input type="hidden" name="calc" value="macros">

                <label>Peso (kg)</label>
                <input name="peso" class="form-control mb-2" type="number" required>

                <label>Calorías diarias</label>
                <input name="calorias" class="form-control mb-3" type="number" required>

                <button class="btn btn-success w-100 rounded">Calcular</button>
            </form>

            {% if resultados.macros %}
            <div class="card border-success bg-success bg-opacity-25 mt-3">
                <div class="card-body">
                    <h5 class="text-success">Macronutrientes diarios:</h5>
                    <p>Proteína: <b>{{ resultados.macros.prote }} g</b></p>
                    <p>Grasa: <b>{{ resultados.macros.grasa }} g</b></p>
                    <p>Carbohidratos: <b>{{ resultados.macros.carbs }} g</b></p>
                </div>
            </div>
            {% endif %}
        </div>

    </div>
</div>






 <div class="container py-4">
        <h1 class="text-center mb-4">Analizador de Recetas</h1>

        {% with mensajes = get_flashed_messages() %}
        {% if mensajes %}
        <div class="alert alert-warning">
            {% for m in mensajes %}
            <div>{{ m }}</div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <form method="POST">

            <div class="row mb-3">
                {% for i in range(1, 11) %}
                <div class="col-md-6 mb-3">
                    <label class="form-label">Ingrediente {{i}}</label>
                    <input type="text" class="form-control bg-secondary text-light" name="ingrediente{{i}}">
                </div>
                {% endfor %}
            </div>

            <button class="btn btn-success w-100" type="submit">Analizar receta</button>
        </form>

        {% if calorias is not none %}
        <div class="mt-4">

            <div class="card bg-success text-dark mb-3">
                <div class="card-body">
                    <h4 class="card-title">Calorías Totales</h4>
                    <p class="card-text fs-4">{{ calorias }}</p>
                </div>
            </div>

            <div class="card bg-success text-dark mb-3">
                <div class="card-body">
                    <h4 class="card-title">Proteínas Totales</h4>
                    <p class="card-text fs-4">{{ proteinas }} g</p>
                </div>
            </div>

            <div class="card bg-success text-dark mb-3">
                <div class="card-body">
                    <h4 class="card-title">¿Es saludable?</h4>
                    <p class="card-text fs-4">{{ saludable }}</p>
                </div>
            </div>

        </div>
        {% endif %}

    </div>

{% endblock %}

{% block scripts %}
    {% endblock %}