{% extends 'base.html' %}

{% block title %}info {% endblock %}

{% block head_extra %}
    {% endblock %}

{% block content %}
<body class="bg-dark text-light">
<div class="container py-4">

    <h1 class="text-center text-success mb-5 fw-bold display-4">Calculadoras Nutricionales</h1>

    <div class="row g-4 justify-content-center">

        <div class="col-sm-12 col-md-6 col-lg-4">
            <form method="POST" class="p-4 border border-success rounded bg-black shadow-lg h-100">
                <h4 class="text-success fw-bold border-bottom pb-2 mb-3">IMC (Índice de Masa Corporal)</h4>
                <input type="hidden" name="calc" value="imc">

                <label class="form-label text-light fw-bold">Peso (kg)</label>
                <input name="peso" class="form-control mb-3 bg-dark text-light border-secondary fw-bold" type="number" step="0.01" required>

                <label class="form-label text-light fw-bold">Altura (m)</label>
                <input name="altura" class="form-control mb-4 bg-dark text-light border-secondary fw-bold" type="number" step="0.01" required>

                <button class="btn btn-success w-100 rounded fw-bold">Calcular IMC</button>
            </form>

            {% if resultados.imc %}
            <div class="card border-success bg-dark mt-3 shadow">
                <div class="card-body">
                    <h5 class="text-success fw-bold">Resultado IMC:</h5>
                    <p class="fs-4 text-light fw-bold">{{ resultados.imc }}</p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="col-sm-12 col-md-6 col-lg-4">
            <form method="POST" class="p-4 border border-success rounded bg-black shadow-lg h-100">
                <h4 class="text-success fw-bold border-bottom pb-2 mb-3">TMB (Tasa Metabólica Basal)</h4>
                <input type="hidden" name="calc" value="tmb">

                <label class="form-label text-light fw-bold">Peso (kg)</label>
                <input name="peso" class="form-control mb-3 bg-dark text-light border-secondary fw-bold" type="number" required>

                <label class="form-label text-light fw-bold">Altura (cm)</label>
                <input name="altura" class="form-control mb-3 bg-dark text-light border-secondary fw-bold" type="number" required>

                <label class="form-label text-light fw-bold">Edad</label>
                <input name="edad" class="form-control mb-3 bg-dark text-light border-secondary fw-bold" type="number" required>

                <label class="form-label text-light fw-bold">Sexo</label>
                <select name="sexo" class="form-control mb-4 bg-dark text-light border-secondary fw-bold" required>
                    <option value="hombre">Hombre</option>
                    <option value="mujer">Mujer</option>
                </select>

                <button class="btn btn-success w-100 rounded fw-bold">Calcular TMB</button>
            </form>

            {% if resultados.tmb %}
            <div class="card border-success bg-dark mt-3 shadow">
                <div class="card-body">
                    <h5 class="text-success fw-bold">Resultado TMB:</h5>
                    <p class="fs-4 text-light fw-bold">{{ resultados.tmb }} kcal</p>
                </div>
            </div>
            {% endif %}
        </div>
        
        <div class="col-sm-12 col-md-6 col-lg-4">
            <form method="POST" class="p-4 border border-success rounded bg-black shadow-lg h-100">
                <h4 class="text-success fw-bold border-bottom pb-2 mb-3">GCT (Gasto Calórico Total)</h4>
                <input type="hidden" name="calc" value="gct">

                <label class="form-label text-light fw-bold">TMB (Kcal/día)</label>
                <input name="tmb" class="form-control mb-3 bg-dark text-light border-secondary fw-bold" type="number" required>

                <label class="form-label text-light fw-bold">Factor de actividad</label>
                <select name="factor" class="form-control mb-4 bg-dark text-light border-secondary fw-bold" required>
                    <option value="1.2">Sedentario</option>
                    <option value="1.375">Ligero</option>
                    <option value="1.55">Moderado</option>
                    <option value="1.725">Intenso</option>
                </select>

                <button class="btn btn-success w-100 rounded fw-bold">Calcular GCT</button>
            </form>

            {% if resultados.gct %}
            <div class="card border-success bg-dark mt-3 shadow">
                <div class="card-body">
                    <h5 class="text-success fw-bold">Resultado GCT:</h5>
                    <p class="fs-4 text-light fw-bold">{{ resultados.gct }} kcal</p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="col-sm-12 col-md-6 col-lg-4">
            <form method="POST" class="p-4 border border-success rounded bg-black shadow-lg h-100">
                <h4 class="text-success fw-bold border-bottom pb-2 mb-3">Peso Ideal</h4>
                <input type="hidden" name="calc" value="ideal">

                <label class="form-label text-light fw-bold">Altura (cm)</label>
                <input name="altura" class="form-control mb-3 bg-dark text-light border-secondary fw-bold" type="number" required>

                <label class="form-label text-light fw-bold">Sexo</label>
                <select name="sexo" class="form-control mb-4 bg-dark text-light border-secondary fw-bold" required>
                    <option value="hombre">Hombre</option>
                    <option value="mujer">Mujer</option>
                </select>

                <button class="btn btn-success w-100 rounded fw-bold">Calcular Peso Ideal</button>
            </form>

            {% if resultados.ideal %}
            <div class="card border-success bg-dark mt-3 shadow">
                <div class="card-body">
                    <h5 class="text-success fw-bold">Resultado Peso Ideal:</h5>
                    <p class="fs-4 text-light fw-bold">{{ resultados.ideal }} kg</p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="col-sm-12 col-md-10 col-lg-8">
            <form method="POST" class="p-4 border border-success rounded bg-black shadow-lg h-100">
                <h4 class="text-success fw-bold border-bottom pb-2 mb-3">Macronutrientes</h4>
                <input type="hidden" name="calc" value="macros">

                <label class="form-label text-light fw-bold">Peso (kg)</label>
                <input name="peso" class="form-control mb-3 bg-dark text-light border-secondary fw-bold" type="number" required>

                <label class="form-label text-light fw-bold">Calorías diarias (GCT)</label>
                <input name="calorias" class="form-control mb-4 bg-dark text-light border-secondary fw-bold" type="number" required>

                <button class="btn btn-success w-100 rounded fw-bold">Calcular Macros</button>
            </form>

            {% if resultados.macros %}
            <div class="card border-success bg-dark mt-3 shadow">
                <div class="card-body">
                    <h5 class="text-success fw-bold">Macronutrientes diarios (en gramos):</h5>
                    <p class="fs-5 text-light">Proteína: <b class="text-success">{{ resultados.macros.prote }} g</b></p>
                    <p class="fs-5 text-light">Grasa: <b class="text-success">{{ resultados.macros.grasa }} g</b></p>
                    <p class="fs-5 text-light">Carbohidratos: <b class="text-success">{{ resultados.macros.carbs }} g</b></p>
                </div>
            </div>
            {% endif %}
        </div>

    </div>
</div>





<div class="container py-4">
        <h1 class="text-center mb-4">Analizador de Recetas</h1>

        {% with mensajes = get_flashed_messages() %}
        {% if mensajes %}
        <div class="alert alert-warning">
            {% for m in mensajes %}
            <div>{{ m }}</div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <form action="{{url_for('index')}}" method="POST">

            <div class="row mb-3">
                {% for i in range(1, 11) %}
                <div class="col-md-6 mb-3">
                    <label class="form-label">Ingrediente {{i}}</label>
                    <input type="text" class="form-control bg-secondary text-light" name="ingrediente{{i}}">
                </div>
                {% endfor %}
            </div>

            <button class="btn btn-success w-100" type="submit">Analizar receta</button>
        </form>

        {% if calorias is not none %}
        <div class="mt-4">

            <div class="card bg-success text-dark mb-3">
                <div class="card-body">
                    <h4 class="card-title">Calorías Totales</h4>
                    <p class="card-text fs-4">{{ calorias }}</p>
                </div>
            </div>

            <div class="card bg-success text-dark mb-3">
                <div class="card-body">
                    <h4 class="card-title">Proteínas Totales</h4>
                    <p class="card-text fs-4">{{ proteinas }} g</p>
                </div>
            </div>

            <div class="card bg-success text-dark mb-3">
                <div class="card-body">
                    <h4 class="card-title">¿Es saludable?</h4>
                    <p class="card-text fs-4">{{ saludable }}</p>
                </div>
            </div>

        </div>
        {% endif %}

    </div>

{% endblock %}

{% block scripts %}
    {% endblock %}